let today=new Date,referenceDate=new Date,events=[],categoriesSelected=[],calendarName="",missingEntrySymbol="&#x2022;",categoriesAll,categoryColors,svgFiles,weekview=!0;
function loadICS(a,b,c,d){categoriesAll=Object.keys(b);categoryColors=b;calendarName=a;svgFiles=d;parseURLparams();parseICS(c).then(()=>displayCalendar()).catch(g=>{console.error("FATAL ERROR: Fehler beim Laden der ICS-Dateien:",g);displayCalendar();document.getElementById("error-message").innerHTML="Fehler beim Laden der Kalender-Quelldateien.<br/>Bitte kontaktieren Sie <div class='modal-center-container'>Termine-Mathe@ruhr-uni-bochum.de.</div>"})}
async function parseICS(a){await Promise.all(categoriesAll.map(async b=>{var c=await fetch(a[b]);if(!c.ok)throw Error(`Response status: ${c.status}`);c=await c.text();c=ICAL.parse(c);c=(new ICAL.Component(c)).getAllSubcomponents("vevent").map(d=>parse_event(d,b));c=c.filter(d=>0<Object.keys(d).length);events.push(...c)}))}
function parse_event(a,b){if(!a.hasProperty("dtstart")||!a.hasProperty("summary"))return console.warn("WARNING: An event in the ics file was ignored because it does not contain a start date (DTSTART) or because it does not contain a summary (SUMMARY)."),{};let c=a.getFirstPropertyValue("summary"),d;try{d=a.getFirstPropertyValue("dtstart").toJSDate()}catch{return console.warn("WARNING: An event in the ics file was ignored because the date could not be converted into javascript format."),{}}if(a.hasProperty("rrule"))return console.warn("WARNING: The event on "+
d.toDateString()+" entitled '"+c+"' in the ics file was ignored because it is a recurring event (i.e. VEVENT contains an RRULE)."),{};let g=a.getFirstPropertyValue("description")||"",e=a.getFirstPropertyValue("location")||missingEntrySymbol,k=[b];try{a.getAllProperties("categories").forEach(f=>{cats=f.jCal;cats=cats.slice(3,cats.length);k=k.concat(cats)})}catch{return console.warn("WARNING: The event on "+d.toDateString()+" entitled '"+c+"' in the ics file was ignored because its event categories could not be parsed."),
{}}k=k.map(f=>f.trim().replace(/[ ]+/g," "));let l=!1,h=!1,p;try{p=a.getFirstPropertyValue("dtend").toJSDate()}catch{h=l=!0,p=d}if(!l){a=d.toLocaleTimeString("de",{hour:"2-digit",minute:"2-digit"});let f=p.toLocaleTimeString("de",{hour:"2-digit",minute:"2-digit"});"00:00"==f&&(p.setMinutes(p.getMinutes()-1),f="23:59");d.toDateString()==p.toDateString()&&"00:00"==a&&"23:59"==f&&(h=l=!0);d.toDateString()!=p.toDateString()&&(l=!0)}l&&d.setHours(0,0,0,0);return{summary:c,description:g,allDayEvent:l,singleDayEvent:h,
startDate:d,endDate:p,location:e,mainCategory:b,allCategories:k}}function displayCalendar(){weekview?drawWeekView():drawMonthView();drawToggleButtons()}
function drawWeekView(){var a=referenceDate.getDay();0==a&&(a=7);let b=new Date(referenceDate.valueOf());b.setDate(b.getDate()+1-a);b.setHours(0,0,0,0);let c=new Date(referenceDate.valueOf());c.setDate(c.getDate()+7-a);c.setHours(23,59,59,999);let d=new Date(b.valueOf());document.getElementById("calendar-header").innerHTML="";a=document.createElement("button");a.classList.add("setting-buttons");a.title="linke Pfeiltaste dr\u00fccken";a.innerHTML="< Vorherige Woche";a.addEventListener("click",function(){changeWeek(-1)});
document.getElementById("calendar-header").appendChild(a);a=document.createElement("div");a.id="calendar-title";a.title="springe zur aktuellen Woche";a.addEventListener("click",function(f){BackToToday()});a.innerHTML=calendarName+"<br>Woche vom "+b.toLocaleString("de-DE",{month:"numeric",year:"numeric",day:"numeric"})+"\u00ad bis "+c.toLocaleString("de-DE",{month:"numeric",year:"numeric",day:"numeric"});document.getElementById("calendar-header").appendChild(a);a=document.createElement("button");a.classList.add("setting-buttons");
a.title="rechte Pfeiltaste dr\u00fccken";a.addEventListener("click",function(){changeWeek(1)});a.innerHTML="N\u00e4chste Woche >";document.getElementById("calendar-header").appendChild(a);document.getElementById("calendar-monthview").innerHTML="";a=document.getElementById("calendar-weekview");a.innerHTML="";var g=document.createElement("colgroup"),e=document.createElement("col");e.classList.add("weekview-col-date");g.appendChild(e);e=document.createElement("col");e.classList.add("weekview-col-time");
g.appendChild(e);e=document.createElement("col");e.classList.add("weekview-col-summary");g.appendChild(e);e=document.createElement("col");e.classList.add("weekview-col-location");g.appendChild(e);a.appendChild(g);g=document.createElement("thead");e=document.createElement("th");e.textContent="Datum";e.classList.add("weekview-day");g.appendChild(e);e=document.createElement("th");e.textContent="Uhrzeit";g.appendChild(e);e=document.createElement("th");e.textContent="Beschreibung";g.appendChild(e);e=document.createElement("th");
e.textContent="Ort";g.appendChild(e);a.appendChild(g);g=events.filter(f=>f.endDate<b||f.startDate>c?!1:categoriesSelected.includes(f.mainCategory));let k=document.createElement("tbody");for(e=0;7>e;e++){let f=d.toDateString()==today.toDateString();var l=g.filter(m=>m.startDate.toDateString()===d.toDateString()||d>=m.startDate&&d<=m.endDate);l.sort((m,n)=>m.startDate-n.startDate);let r=l.length,q=document.createElement("tr");var h=document.createElement("td");h.colSpan="4";let t=document.createElement("hr");
h.appendChild(t);q.appendChild(h);k.appendChild(q);if(f){let m=document.createElement("tr");m.classList.add("today-separator");m.classList.add("today-separator-top");h=document.createElement("td");h.colSpan="4";t=document.createElement("hr");h.appendChild(t);m.appendChild(h);k.appendChild(m)}q=document.createElement("tr");h=document.createElement("td");h.classList.add("weekview-day");1<r&&(h.rowSpan=r);f?(h.classList.add("weekview-today-date"),h.innerHTML="heute<br>"+d.toLocaleDateString("de",{weekday:"short",
month:"numeric",day:"numeric"})):h.textContent=d.toLocaleDateString("de",{weekday:"short",month:"numeric",day:"numeric"});q.appendChild(h);var p=!0;l.forEach(m=>{p?p=!1:q=document.createElement("tr");let n=document.createElement("td");n.classList.add("weekview-event","weekview-event-time");n.style.backgroundColor=categoryColors[m.mainCategory];m.allDayEvent?n.innerHTML=missingEntrySymbol:n.textContent=m.startDate.toLocaleTimeString("de",{hour:"2-digit",minute:"2-digit"});n.addEventListener("click",
function(){openModal(m)});q.appendChild(n);n=document.createElement("td");n.classList.add("weekview-event","weekview-event-summary");n.style.backgroundColor=categoryColors[m.mainCategory];n.textContent=m.summary;n.addEventListener("click",function(){openModal(m)});q.appendChild(n);n=document.createElement("td");n.classList.add("weekview-event");n.classList.add("weekview-event-location");n.style.backgroundColor=categoryColors[m.mainCategory];n.innerHTML=m.location;n.addEventListener("click",function(){openModal(m)});
q.appendChild(n);k.appendChild(q)});0==r&&(f&&(l=document.createElement("td"),q.appendChild(l),l=document.createElement("td"),l.innerHTML="<i> \u2014 keine Veranstaltungen \u2014</i>",l.classList.add("no-events-to-display"),q.appendChild(l)),k.appendChild(q));f&&(q=document.createElement("tr"),q.classList.add("today-separator"),q.classList.add("today-separator-bottom"),h=document.createElement("td"),h.colSpan="4",t=document.createElement("hr"),h.appendChild(t),q.appendChild(h),k.appendChild(q));d.setDate(d.getDate()+
1)}a.appendChild(k)}
function drawMonthView(){let a=new Date(referenceDate.getFullYear(),referenceDate.getMonth(),1);var b=new Date(referenceDate.getFullYear(),referenceDate.getMonth()+1,0);let c=new Date(a.valueOf());c.setDate(c.getDate()-a.getDay());c.setHours(0,0,0,0);let d=new Date(b.valueOf());d.setDate(d.getDate()+6-b.getDay());d.setHours(23,59,59,999);let g=new Date(c.valueOf());document.getElementById("calendar-header").innerHTML="";b=document.createElement("button");b.classList.add("setting-buttons");b.title=
"linke Pfeiltaste dr\u00fccken";b.innerHTML="< Vorheriger Monat";b.addEventListener("click",function(){changeMonth(-1)});document.getElementById("calendar-header").appendChild(b);b=document.createElement("div");b.id="calendar-title";b.title="springe zum aktuellen Monat";b.addEventListener("click",function(k){BackToToday()});b.innerHTML=calendarName+"<br>"+a.toLocaleString("de-DE",{month:"long",year:"numeric"});document.getElementById("calendar-header").appendChild(b);b=document.createElement("button");
b.classList.add("setting-buttons");b.title="rechte Pfeiltaste dr\u00fccken";b.addEventListener("click",function(){changeMonth(1)});b.innerHTML="N\u00e4chster Monat >";document.getElementById("calendar-header").appendChild(b);let e=document.getElementById("calendar-monthview");e.innerHTML="";document.getElementById("calendar-weekview").innerHTML="";"So Mo Di Mi Do Fr Sa".split(" ").forEach(k=>{let l=document.createElement("div");l.textContent=k;"So"==k||"Sa"==k?l.classList.add("monthview-weekend-header"):
l.classList.add("monthview-day-header");e.appendChild(l)});b=events.filter(k=>k.endDate<c||k.startDate>d?!1:categoriesSelected.includes(k.mainCategory));for(let k=0;50>k;k++){let l=g.toDateString()==today.toDateString(),h=b.filter(f=>f.startDate.toDateString()===g.toDateString()||g>=f.startDate&&g<=f.endDate);h.sort((f,r)=>f.startDate-r.startDate);let p=document.createElement("div");g.getMonth()==a.getMonth()?p.classList.add("monthview-day"):p.classList.add("monthview-day","monthview-day-outside-month");
0!=g.getDay()&&6!=g.getDay()||p.classList.add("monthview-weekend");l&&p.classList.add("monthview-today");p.textContent=g.getDate();h.forEach(f=>{let r=document.createElement("div");r.classList.add("monthview-day-event");r.style.backgroundColor=categoryColors[f.mainCategory];r.textContent=f.allDayEvent?f.summary:f.startDate.toLocaleTimeString("de",{hour:"2-digit",minute:"2-digit"})+" "+f.summary;r.addEventListener("click",function(){openModal(f)});p.appendChild(r)});e.appendChild(p);g.setDate(g.getDate()+
1);if(g>d)break}}
function drawToggleButtons(){let a=document.getElementById("toggle-buttons-header");a.innerHTML="";button=document.createElement("button");buttonImage=document.createElement("img");weekview?(buttonImage.src=svgFiles.month,button.title="zur Monatsansicht wechseln"):(buttonImage.src=svgFiles.week,button.title="zur Wochenansicht wechseln");buttonImage.classList.add("svg-icon");button.classList.add("toggle-buttons");button.classList.add("setting-buttons");button.appendChild(buttonImage);button.addEventListener("click",
function(){toggleWeekMonth()});a.appendChild(button);for(const b of categoriesAll)button=document.createElement("a"),button.classList.add("toggle-buttons"),input=document.createElement("input"),input.type="checkbox",input.id=b,input.title="Kalender ein- bzw. ausschalten",categoriesSelected.includes(b)?(input.checked=!0,input.style.accentColor=categoryColors[b]):(input.checked=!1,input.classList.add("button-switched-off")),input.addEventListener("click",function(){toggleCategory(b)}),button.appendChild(input),
label=document.createElement("label"),label.textContent=b,label.htmlFor=b,categoriesSelected.includes(b)?(button.classList.remove("label-switched-off"),label.style.color=categoryColors[b]):button.classList.add("label-switched-off"),button.appendChild(label),a.appendChild(button);help=document.createElement("a");help.title="Hilfe anzeigen";help.innerHTML="Hilfe";help.id="help";help.addEventListener("click",function(){showHelp()});a.appendChild(help);button=document.createElement("button");buttonImage=
document.createElement("img");buttonImage.classList.add("svg-icon");buttonImage.src=svgFiles.save;button.classList.add("toggle-buttons","setting-buttons");button.title="kopiere alle Anzeigeeinstellungen in die URL\n(z.B. um sie als Lesezeichen im Browser zu speichern)";button.appendChild(buttonImage);button.addEventListener("click",function(){addParamsToURL()});a.appendChild(button)}
function openModal(a){document.body.classList.add("no-scroll");a.singleDayEvent?document.getElementById("modal-title").textContent=a.startDate.toLocaleDateString("de-de",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):a.allDayEvent?document.getElementById("modal-title").textContent=a.startDate.toLocaleDateString("de-de",{weekday:"long",year:"numeric",month:"long",day:"numeric"})+" \u2013 "+a.endDate.toLocaleDateString("de-de",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):
document.getElementById("modal-title").textContent=a.startDate.toLocaleDateString("de-de",{weekday:"long",year:"numeric",month:"long",day:"numeric"})+", "+a.startDate.toLocaleTimeString("de-de",{hour:"numeric",minute:"2-digit"})+"\u2013"+a.endDate.toLocaleTimeString("de-de",{hour:"numeric",minute:"2-digit"});document.getElementById("modal-body").innerHTML="";el=document.createElement("div");el.classList.add("eventsummary");el.innerHTML=a.summary;document.getElementById("modal-body").appendChild(el);
el=document.createElement("div");el.classList.add("eventlocation");el.innerHTML=a.location==missingEntrySymbol?"Ort unbekannt":a.location;document.getElementById("modal-body").appendChild(el);a.allCategories.forEach(b=>{el=document.createElement("button");el.classList.add("toggle-buttons","dummy-button");el.disabled=!0;el.innerHTML=b;categoriesAll.includes(b)?el.style.backgroundColor=categoryColors[b]:el.style.backgroundColor=categoryColors[a.mainCategory];document.getElementById("modal-body").appendChild(el)});
el=document.createElement("p");el.classList.add("eventabstract");el.innerHTML=a.description.replace(/(?:\r\n|\r|\n)/g,"<br>");document.getElementById("modal-body").appendChild(el);document.getElementById("modal-body").appendChild(closeModalButton());document.getElementById("event-modal").style.display="flex"}
function showHelp(a){document.body.classList.add("no-scroll");document.getElementById("modal-title").textContent="Hilfe zur Benutzung des Fakult\u00e4tskalenders";a="<li><b>alle Kalender: </b>"+copyButton("https://mail.ruhr-uni-bochum.de/SOGo/dav/public/termixxd/Calendar/");a+="https://mail.ruhr-uni-bochum.de/SOGo/dav/public/termixxd/Calendar/</li>";for(var b of categoriesAll)a+="<li><b>",a+=b,a+=": </b>",a+=copyButton(links[b]),a+=links[b],a+="</li>";b="";for(const c of categoriesAll)b+="<li><b>",
b+=c,b+=": </b>",b+=copyButton(links[c].replace(/public\//g,"").replace(/.ics/g,"/")),b+=links[c].replace(/public\//g,"").replace(/.ics/g,"/"),b+="</li>";document.getElementById("modal-body").innerHTML='\n\t        <div class="helpsection">\n\t        Zwischen Wochen- und Monatsansicht wechseln\n\t\t</div>\n\t\t<p> \n\t\tKlicken Sie dazu den Schalter \n\t\t<button class=\'toggle-buttons setting-buttons dummy-button\' disabled>\n\t\t<img src="'+svgFiles.week+'" class="svg-icon">\n\t\t</button> \n\t\tbzw.\n\t\t<button class=\'toggle-buttons setting-buttons dummy-button\' disabled>\n\t\t<img src="'+
svgFiles.month+'" class="svg-icon">\n\t\t</button>\n\t\toben links \u00fcber dem Kalender.\n\t\t</p>\n\t\t\n\t\t<div class="helpsection">\n\t\tVeranstaltungen bestimmter Fachbereiche ein- und ausblenden\n\t\t</div>\n\t\t<p> \n\t\tKlicken Sie dazu die Kontrollk\u00e4stchen\n\t\t<a class="toggle-buttons dummy-checkbox">\n\t\t<input type="checkbox" class="dummy-checkbox" checked>\n\t\t<label class=\'dummy-checkbox\'>\n\t\tFachbereich\n\t\t</label>\n\t\t</a>\n\t\tdirekt \u00fcber dem Kalender.\n\t\t</p>\n\t\t\n\t\t<div class="helpsection">\n\t\tGew\u00e4hlte Anzeigeeinstellungen abspeichern\n\t\t</div>\n\t\t<p> \n\t\tKlicken Sie den Schalter \n\t\t</p>\n\t\t<div class="modal-center-container">\n\t\t<button class=\'toggle-buttons setting-buttons dummy-button\' disabled>\n\t\t<img src="'+
svgFiles.save+'" class="svg-icon">\n\t\t</button> \n\t\t</div>\n\t\t<p>\n\t\trechts oberhalb des Kalenders, so werden die gew\u00e4hlten Anzeigeeinstellungen als Parameter in die URL \u00fcbertragen. Diese URL k\u00f6nnen Sie nun bequem als Lesezeichen in Ihrem Browser setzen.\n\t\t</p>\n\t\t\n\t\t<div class="helpsection">\n\t\tNavigation\n\t\t</div>\n\t\t<p> \n\t\tMit der rechten oder linken Pfeiltaste (\u2190/\u2192) auf Ihrer Tastatur k\u00f6nnen Sie eine Woche bzw. einen Monat vor oder zur\u00fcck navigieren.  Alternativ klicken Sie die entsprechenden Schalter oberhalb des Kalenders. \n\t\t</p>\n\t\t\t\t\n                <div class="helpsection">\n\t\tDetails zu Veranstaltungen anzeigen\n\t\t</div>\n\t\t<p>\n        Klicken Sie einfach auf eine Veranstaltung, so erscheint ein Fenster mit allen verf\u00fcgbaren Details.\n\t\t</p>\n\t\t\t\t\n\t\t<div class="helpsection">\n\t\tKalender abonnieren\n\t\t</div>\n\t\t<p> \n\t\tUm die Kalender der Fachbereiche in einem Programm wie Thunderbird anzuzeigen, k\u00f6nnen folgende URLs genutzt werden:\n\t\t</p>\n\t\t<ul>'+
a+'\n\t\t</ul>\n\t\t<p>\n\t\tDiese URLs geben Sie als Adresse beim Hinzuf\u00fcgen eines neuen Kalenders in dem entsprechenden Dialog bzw. den Einstellungen Ihres Kalenderprogramms an.\n\t\t</p>\n\t\t<p> \n\t\t<b>Wichtige Hinweise f\u00fcrs Abonnieren</b>\n\t\t<ul>\n\t\t<li>\t\n\t\tAbonnieren Sie keinen Kalender, den Sie auch editieren m\u00f6chten, sondern folgen Sie stattdessen den Anweisungen im n\u00e4chsten Abschnitt.\n\t\t</li>\n\t\t<li>\n\t\tDie Kalender sind \u00f6ffentlich. Zum Lesen brauchen Sie sich nicht authentifizieren.\n\t\t</li>\n\t\t</ul>\n\t\t</p>\n\t\t\n\t\t<div class="helpsection">\n\t\tKalender editieren\n\t\t</div>\n\t\t<p> \n\t\tKalendereintr\u00e4ge hinzuf\u00fcgen, bearbeiten und l\u00f6schen k\u00f6nnen nur authentifizierte Benutzer. \n\t\tIn der Regel sind dies Professoren und deren Sekretariate.  \n\t\tDie Authentifizierung erfolgt \u00fcber die RUB-LoginID. \n\t\tZudem muss dem Benutzer eine entsprechende Zugangsberechtigung gegeben werden.  \n\t\tFalls Sie eine neue Zugangsberechtigung w\u00fcnschen, wenden Sie sich bitte per E-Mail an \n\t\t<div class="modal-center-container">Termine-Mathe@ruhr-uni-bochum.de.</div>\n\t\t</p>\n\t\t<p>\n\t\tIst die Zugangsberechtigung erteilt, k\u00f6nnen Kalendereintr\u00e4ge auf zwei Art und Weisen editiert werden:\n\t\t</p>\n\t\t<p>\n\t\t<b>Option 1:</b> \n\t\tFalls Sie bereits ein Kalenderprogramm benutzen, \n\t\tist das die einfachste Option.\n\t\t</p>\n\t\t<p>\n\t\tVoraussetzung ist, \n\t\tdass Ihr Kalenderprogramm den offenen Standard CalDAV unterst\u00fctzt. \n\t\tDies ist bei Programmen wie beispielsweise Thunderbird und Apple iCal der Fall, bei Google Calendar jedoch nicht; siehe auch <b><a href="https://de.wikipedia.org/wiki/CalDAV#Client" target="_blank">diese Liste</a></b> bei Wikipedia.\n\t\t</p>\n\t\t<p>\n\t\tAbonnieren Sie den Kalender in Ihrem Programm mit Schreibberechtigungen unter Verwendung der folgenden URLs (die von den oben angegebenen URLs abweichen!): \n\t\t</p>\n\t\t<ul>'+
b+'\n\t\t</ul>\n\t\t<p>\n\t\tAnschlie\u00dfend k\u00f6nnen Sie jederzeit Eintr\u00e4ge bequem \u00fcber Ihr Kalenderprogramm editieren. \n\t\t</p>\n\t\t<p>\n\t\t<b>Option 2:</b> Alternativ k\u00f6nnen Sie im Browser \u00fcber die Benutzeroberfl\u00e4che des SOGo-Kalenders den entsprechenden Kalender abonnieren.  Folgen Sie dazu <b><a href="https://mail.ruhr-uni-bochum.de/SOGo/" target="_blank">diesem Link</a></b> und melden sich mit Ihrer RUB-Benutzerkennung und Passwort an. Sie gelangen so zu Ihrem pers\u00f6nlichem SOGo-Kalender.  Dort klicken Sie in der linken Spalte auf <i>Abonnements</i> und suchen in dem neu ge\u00f6ffneten Feld nach dem virtuellen Benutzer <i>Termine-Mathe</i>. Es erscheint eine Liste aller verf\u00fcgbaren Kalender. W\u00e4hlen Sie nun die Kalender aus, die Sie abonnieren wollen.  Falls Sie Schreibberechtigungen haben (siehe oben), k\u00f6nnen sie nun Termine editieren.\n\t\t</p>\n\t\t\n\t\t<p> \n\t\t<b>Wichtige Hinweise f\u00fcrs Editieren</b>\n\t\t<ul>\n\t\t<li>\n\t\tDie Kalender sind prim\u00e4r f\u00fcr solche Veranstaltungen an der Fakult\u00e4t bestimmt, die sich an einen gr\u00f6\u00dferen Kreis von Personen innerhalb der Fakult\u00e4t richten. \n\t\tDarunter fallen Konferenzen, Workshops, Oberseminare und ggf. auch andere Forschungsveranstaltungen wie Seminare oder Lesekurse. \n\t\tLehrveranstaltungen fallen in der Regel nicht darunter.\n\t\t</li>\n\t\t<li>\n\t\tAlle Eintr\u00e4ge erscheinen <b>\u00f6ffentlich</b>!\n\t\tDaher ist bei neuen Eintr\u00e4gen Vorsicht geboten, dass Sie tats\u00e4chlich den richtigen Kalender ausw\u00e4hlen, insbesondere bei privaten Terminen.  \n\t\t</li>\n\t\t<li>\n\t\tSoll ein Eintrag auch in Semesterkalendern (siehe beispielweise <b><a href="https://math.ruhr-uni-bochum.de/fakultaet/arbeitsbereiche/topologie/oberseminar-topologie/" target="_blank">hier</a></b>) angezeigt werden, so muss f\u00fcr den Termin die entsprechende Kategorie (wie etwa <i>Oberseminar Topologie</i>) angegeben werden. \n\t\tEs empfielt sich, Kalendereintr\u00e4ge zu kopieren statt neu zu erstellen.\n\t\t</li>\n\t\t<li>\n\t\tSich wiederholende Veranstaltungen (technisch: VEVENTS mit RRULE) werden grunds\u00e4tzlich nicht angezeigt.\n\t\t</li>\n\t\t<li>\n\t\tMehrt\u00e4gige Veranstaltungen werden grunds\u00e4tzlich als ganzt\u00e4gige Veranstaltungen angezeigt.\n\t\t</li>\n\t\t</ul>\n\t\t</p>\n\t\t<div class="helpsection">\n\t\tWeitergehende Informationen\n\t\t</div>\n\t\t<p>\n\t\tDer Quellcode f\u00fcr den Kalender ist unter AGPL-3.0-Lizenz \n\t\t<a href="https://github.com/cbz20/Web-Calendar" target="_blank"><b>hier</b></a> ver\u00f6ffentlicht.\n\t\t</p>\n\t\t<p>\n\t\t<i>\n\t\tBei technischen Problemen oder Fragen wenden Sie sich bitte per E-Mail an \n\t\t</i>\n\t\t<div class="modal-center-container"><i>Termine-Mathe@ruhr-uni-bochum.de.</i></div>\n\t\t</p>\n\t\t';
document.getElementById("modal-body").appendChild(closeModalButton());document.getElementById("event-modal").style.display="flex"}
function copyButton(a){return"<button \n    \tclass='toggle-buttons setting-buttons' \n    \ttitle=\"url kopieren\" \n    \tonclick='navigator.clipboard.writeText(\""+a+'").then(function() {\n\t    console.log("copied url");\n\t}, function() {\n\t    console.warn("error trying to copy url");\n\t});\'>\n\t<img \n\t\tsrc="'+svgFiles.copy+'" \n\t\tclass="svg-icon">\n\t</button> '}
function closeModalButton(){let a=document.createElement("div");a.classList.add("modal-center-container");let b=document.createElement("button");b.classList.add("toggle-buttons","setting-buttons");b.innerHTML="Schlie\u00dfen";b.addEventListener("click",function(){document.getElementById("event-modal").style.display="none";document.body.classList.remove("no-scroll")});a.appendChild(b);return a}
document.getElementById("event-modal").addEventListener("click",function(a){a.currentTarget===a.target&&(document.getElementById("event-modal").style.display="none",document.body.classList.remove("no-scroll"))});function changeMonth(a){referenceDate.setMonth(referenceDate.getMonth()+a);displayCalendar()}function changeWeek(a){referenceDate.setDate(referenceDate.getDate()+7*a);displayCalendar()}
function toggleCategory(a){let b=!0;categoriesSelected=categoriesSelected.filter(function(c){return c!==a?!0:b=!1});b&&categoriesSelected.push(a);displayCalendar()}function toggleWeekMonth(){weekview=!weekview;displayCalendar()}
function parseURLparams(){var a=new URLSearchParams(window.location.search);"0"==a.get("weekview")&&(weekview=!1);var b=!1;for(const c of categoriesAll)"0"==a.get(c)&&(b=!0);for(const c of categoriesAll)a.has(c)?"0"!=a.get(c)&&categoriesSelected.push(c):b&&categoriesSelected.push(c);0==categoriesSelected.length&&(categoriesSelected=categoriesAll)}
function addParamsToURL(){var a=categoriesAll.filter(d=>!categoriesSelected.includes(d)),b="1",c=categoriesSelected;a.length<categoriesSelected.length&&(b="0",c=a);a="";for(const d of c)a+=d+"="+b+"&";0==weekview&&(a+="weekview=0&");""!=a&&(a="?"+a.slice(0,-1));b=location.href.split("?")[0];window.history.pushState("object",document.title,b+a)}document.addEventListener("keydown",logKey);
function logKey(a){"37"==a.which?weekview?changeWeek(-1):changeMonth(-1):"39"==a.which&&(weekview?changeWeek(1):changeMonth(1))}function BackToToday(){today=new Date;referenceDate=new Date;displayCalendar()}function updateToday(){(new Date).toDateString()!=today.toDateString()&&(today=new Date,referenceDate=new Date,displayCalendar())}setInterval(updateToday,6E4);
